# 8장 스프링이란 무엇인가?

- 스프링의 사상과 가치, 그리고 적용된 원칙을 좀 더 깊이 있게 알아본다.

## 8.1 스프링의 정의

- 스프링을 한 마디로 정의하긴 어렵지만 "자바 엔터프라이즈 개발을 편하게 해주는 오픈소스 경량급 애플리케이션 프레임워크"라고 정의할 수 있다.
    - 애플리케이션 프레임워크
        - 일반적으로 라이브러리나 프레임워크는 특정 업무 분야나 기술에 특화되어 있다.
            - 스프링은 "애플리케이션 프레임워크"라는 특징을 갖는다.
        - 스프링의 탄생
            - 로드 존슨(Rod Johnson)은 『Expert One-on-One J2EE Design and Development』에서 "항상 프레임워크 기반으로 접근하라"고 강조했다.
            - 이 책에 실린 예제가 스프링의 기반이 되었고, 이후 오픈소스 프로젝트로 발전했다.
        - 스프링이 애플리케이션 프레임워크라고 불리는 이유
            - 일관된 프로그래밍 모델과 핵심 기술을 기반으로, 애플리케이션의 다양한 분야에 필요한 기능을 효과적으로 지원해 빠른 개발을 가능하게 한다.
        - 스프링의 존재 목적
            - 핵심 기술에 담긴 프로그래밍 모델을 일관되게 적용함으로써, 엔터프라이즈 애플리케이션 전 계층에 전략과 기능을 제공하고 개발을 편리하게 만들어준다.
    - 경량급(Lightweight)
        - 스프링은 구조적으로는 복잡하고 방대한 프레임워크지만, EJB 같은 과도한 엔지니어링이 적용된 기술과 대비시켜 설명하기 위핸 사용되는 표현이다.
        - 스프링은 톰캣(Tomcat) 같은 단순한 서버 환경에서도 완벽하게 동작한다.
        - 복잡한 서버나 컨테이너 없이도 EJB 수준의 엔터프라이즈 기능을 대부분 제공할 수 있는 것이 스프링의 장점이다.
    - 자바 엔터프라이즈 개발을 편하게
        - 스프링은 근본적인 부분에서 엔터프라이즈 개발의 복잡함을 제거하고, 개발을 편하게 해주는 해결책을 제시한다.
        - EJB의 비전과 목표
            - 개발자가 복잡한 로우레벨 기술에 신경 쓰지 않고 비즈니스 로직 구현에 집중할 수 있도록 하는 것이었다.
            - 그러나 또 다른 형태의 복잡함을 애플리케이션에 가져오게 되었다.
        - 스프링은 EJB와 같은 목적을 추구하면서도, 그 과정에서 불필요한 복잡함을 추가하지 않도록 설계되었다.
        - 엔터프라이즈 개발에 필요한 기술적 요구를 충족시키면서도, 개발을 복잡하게 만들지 않는 것이 스프링의 핵심 장점이다.
    - 오픈소스
        - 오픈소스란 소스 코드가 모두에게 공개되어, 특별한 라이선스 없이 자유롭게 사용하고, 수정하고, 배포할 수 있는 소프트웨어를 의미한다.
        - 스프링은 오픈소스 프로젝트로, 개발 과정에 다양한 사람들이 참여할 수 있다는 점이 큰 장점이다.
        - 장점
            - 공개된 커뮤니티에서 투명하게 개발되며, 다양한 참여를 통해 빠르고 유연한 발전이 가능하다.
            - 라이선스 비용에 대한 부담이 없다.
        - 단점
            - 지속적이고 안정적인 개발이 불확실하다.
        - 스프링은 오픈소스의 문제점을 보완하기 위해, 전담 기업이 개발과 품질 관리를 책임지며 안정적이고 전문적인 오픈소스 프로젝트로 관리되고 있다.

## 8.2 스프링의 목적

- 스프링의 진정한 가치는, 그 목적을 이해하고 이를 달성하기 위한 도구로 활용할 때 제대로 된 가치를 얻을 수 있다.

### 8.2.1 엔터프라이즈 개발의 복잡함

- 복잡함의 근본적인 이유
    - 첫 번째는 기술적인 제약조건과 요구사항이 늘어가기 때문이다.
        - 엔터프라이즈 시스템이란, 서버에서 동작하며 기업과 조직의 업무를 처리하는 시스템을 말한다
        - 이 시스템들은 높은 성능, 안정성, 보안, 원격 처리(Remoting) 등 다양한 기술적 요구사항을 수용해야 하기 때문에 복잡도는 증가한다.
    - 두 번째는 엔터프라이즈 애플리케이션을 구현해야 할 핵심기능인 비즈니스 로직의 복잡함이 증가하기 때문이다.
        - 엔터프라이즈 시스템이 관여하는 업무 비율이 늘어남에 따라, 핵심 기능인 비즈니스 로직도 더 복잡해진다.
- 복잡함을 가중시키는 원인
    - 복잡함이란, 시스템을 구성하는 세부 요소들이 이해하기 어렵게 얽혀 있어 다루기 어렵다는 뜻이다.
    - 자바 엔터프라이즈 시스템 개발이 어려운 이유는, 비즈니스 로직과 엔터프라이즈 기술 두 가지 복잡함이 서로 얽혀 있기 때문이다.

### 8.2.2 복잡함을 해결하려는 도전

- 제거될 수 없는 근본적인 복잡함
    - 복잡성을 제거하기 위해 비즈니스 로직의 적용 범위를 제한하거나, 기술적인 요구사항을 생략하는 것은 해결책이 아니다.
    - 따라서 이러한 복잡성에 효과적으로 대응하려면, 비즈니스 로직의 복잡성과 기술적인 복잡성을 분리하는 전략이 필요하다.
- 실패한 해결책: EJB
    - EJB의 기본 전략 역시 개발자가 비즈니스 로직 구현에 집중할 수 있도록, 두 가지 복잡성을 분리하는 데 목적이 있었다.
    - 핵심 로직에서 일부 기술적인 코드를 제거하긴 했지만, 결과적으로는 EJB의 환경과 스펙에 종속된 코드를 작성해야 하는 부담이 따랐다.
    - 기술적인 복잡성을 줄이려다 오히려 더 큰 복잡성을 초래했으며, 자바 언어의 유연함과 장점마저 제한되었다.
- 비침투적인 방식을 통한 효과적인 해결책: 스프링
    - 침투적인(Invasive) 기술은 복잡함을 가중시키는 원이니 된다.
    - 스프링은 비침투적인(Non-Invasive) 접근 방식을 택하여, 스프링에 종속된 코드가 거의 드러나지 않도록 설계되었다.
    - 이로 인해 기술적인 복잡성과 비즈니스 로직을 분리할 수 있었다.

### 8.2.3 복잡함을 상대하는 스프링의 전략

- 기술적 복잡함을 상대하는 전략
    - 첫 번째 문제: 기술에 대한 접근 방식이 일관성이 없고, 특정 환경에 종속적이다.
        - 스프링은 서비스 추상화를 도입하여 이러한 문제를 해결했다.
            - 기술이나 서버 환경이 달라져도 코드의 일관성을 유지할 수 있다.
            - 테스트의 편의성이 증대 시킨다.
            - 기술에 대한 세부 설정과 환경으로부터 독립적인 코드를 작성할 수 있다.
            - 데이터 액세스 예외에 대한 추상화를 통해, 불필요하게 예외를 직접 처리하거나 throws를 선언하는 번거로움을 줄일 수 있다.
        - 스프링이 제공하는 템플릿/콜백 패턴은 반복적이고 형식적인 작업 흐름과 API 사용 코드를 제거해 준다.
            - 이를 통해 기술을 사용하는 코드에서도 핵심 비즈니스 로직에 집중할 수 있게 된다.
    - 두 번째 문제: 기술적인 처리를 담당하는 코드가 성격이 다른 코드에 섞여서 등장한다.
        - 스프링은 이 문제를 해결하기 위해 AOP(Aspect-Oriented Programming)를 활용한다.
            - 트랜잭션 처리, 로깅, 감사(Audit)와 같은 공통 기술을 비즈니스 로직과 분리함으로써 복잡함을 해결한다.
- 비즈니스와 애플리케이션 로직의 복잡함을 상대하는 전략
    - 과거에는 SQL을 통해 비즈니스 로직을 직접 표현하고, 핵심 로직을 프로시저로 처리하는 경우가 많았다.
        - 이 방식은 확장성이 떨어지고, DB에 부담을 주는 문제가 있었다.
    - 현재의 엔터프라이즈 시스템 개발은 비즈니스 로직을 애플리케이션 계층에서 처리하는 방향으로 변화하고 있다.
        - 확장성이 높아진다.
        - 객체에 담긴 로직은 테스트가 쉽다.
        - 목(Mock) 객체를 활용하면 DB 없이도 테스트가 가능하다.
        - 최신 설계와 개발 비법, 모델링을 중심으로 한 개발 방법은 객체 기반의 설계와 구현에 잘 부합한다.
    - 객체지향 언어의 장점
        - 유연한 설계와 높은 재사용성을 제공한다.
        - 이를 바탕으로 복잡한 비즈니스 로직도 체계적으로 구현할 수 있다.
            - 객체지향 분석 및 설계(OOAD)를 통해 정의된 모델을 코드로 구현하고, 지속적으로 발전시켜 나갈 수 있다.
    - 비즈니스 로직의 복잡성을 다루는 전략은 자바라는 객체지향 기술 그 자체에 있다.
    - 스프링은 객체지향 언어가 가진 장점을 제대로 활용하지 못하도록 방해하는 요소들을 제거해 주는 도구일 뿐이다.
- 핵심 도구: 객체지향과 DI
    - 스프링의 모토는 “기본으로 돌아가자”이다.
        - 자바의 객체지향에 충실한 설계를 지향하고, 단순한 객체로 개발할 수 있도록 돕는다는 의미다.
        - 스프링은 DI와 같은 유용한 기술을 손쉽게 적용할 수 있도록 지원함으로써, 객체지향 설계 기법을 적용할 수 있는 구조를 제공한다.
    - 기술적인 복잡함을 효과적으로 다룰 수 있게 해주는 기법들은 모두 DI를 기반으로 한다.
    - DI 적용 대상을 찾는 기준은
        - 변경 가능성이 있는 것
        - 역할이나 책임이 다르고, 변경의 이유가 다른 기능
    - DI는 좋은 객체 설계의 결과물이지만, DI를 적극적으로 활용하는 과정에서 객체지향 설계의 원칙을 자연스럽게 따르게 되며, 객체지향의 장점을 잘 살린 구조를 만들 수 있다.
    - 비즈니스 로직 자체의 복잡성을 해결하려면 DI보다 객체지향 설계 기법이 더 중요하다.
        - 순수한 비즈니스 로직만 담고 있는 코드는 객체지향 분석과 설계로 도출된 도메인 모델을 쉽게 적용할 수 있다.
        - 따라서 스프링은 비침투적 방식을 채택해 애플리케이션 로직에 영향을 주지 않도록 했다.
            - 객체지향 디자인 패턴과 설계 기법이 자연스럽게 녹아들 수 있다.
            - 객체지향의 장점을 최대한 활용하여, 복잡하고 변화가 잦은 비즈니스 환경에도 유연하게 대응할 수 있다.
    - 스프링의 기술과 전략은 자바 언어가 가진 객체지향이라는 강력한 도구를 효과적으로 활용할 수 있도록 지원하는 것에 목적이 있다.

## 8.3 POJO 프로그래밍

- 스프링 핵심 개발자들은 “스프링의 정수(Essence)는 엔터프라이즈 서비스 기능을 POJO에 제공하는 것”이라고 말한다.
- 엔터프라이즈 서비스 기술과, 애플리케이션의 핵심 로직을 담고 있는 POJO(Plain Old Java Object) 코드를 분리했다는 뜻이다.
    - 비즈니스 로직은 단순한 객체로 구현하되, 그 로직이 실행되는 데 필요한 트랜잭션, 보안, 로깅 등 엔터프라이즈 기능은 POJO 외부에서 제공하도록 한 것이다.
- “분리되어 있지만 반드시 필요한 엔터프라이즈 서비스 기능을 POJO 방식의 핵심 로직 코드에 자연스럽게 통합해 제공하는 것”이 스프링의 가장 강력한 특징과 목표다.

### 8.3.1 스프링의 핵심: POJO

- 스프링 애플리케이션의 기본 구조

<img alt="Image" style="margin: 10px;" src="https://github.com/user-attachments/assets/43c46faf-cb11-44ff-be8d-a4d46eb2472d" />

- 스프링 애플리케이션은 크게 두 부분으로 구성된다.
    - POJO를 이용해 구현된 애플리케이션 코드
    - POJO 간의 관계 및 동작 방식을 정의하는 설계 정보
- 스프링의 프로그래밍 모델은 DI 개념을 애플리케이션 전반에 적용하는 것이다.
- 스프링이 제공하는 핵심 기술들은 애플리케이션을 POJO 기반으로 개발할 수 있도록 지원하는 가능 기술(Enabling Technology)로 불린다.
    - IoC/DI
    - AOP
    - PSA(Portable Service Abstraction)

### 8.3.2 POJO란 무엇인가?

- POJO(Plain Old Java Object) 란, 특정 기술에 의존하지 않는 순수한 자바 객체를 의미한다.
- POJO 기반 프로그래밍은 단순한 자바 객체를 활용해 애플리케이션의 비즈니스 로직을 구현하는 방식이다.

### 8.3.3 POJO의 조건

- 특정 규약(Contract)에 종속되지 않는다.
    - 자바 언어와 필수적인 API 외에는 어떤 기술적인 규약에도 의존하지 않아야 한다.
    - 특정 규약에 의해 특정 클래스를 반드시 상속해야 하는 경우, 자바의 단일 상속 제한 때문에 객체지향적인 설계 기법을 적용하기 어려워진다.
    - 규약이 적용된 환경에 종속적이면, 다른 환경으로의 이전도 어려워진다.
- 특정 환경에 종속되지 않는다.
    - 특정 환경에서만 동작 가능한 객체는 POJO라고 할 수 없다.
    - POJO는 환경에 독립적이어야 한다.
    - POJO는 환경에 독립적이어야 하며, 기술이나 환경 정보에 의존해서는 안 된다.
        - 다른 클라이언트에서 재사용이 어렵다.
        - 테스트를 위한 독립 실행이 어렵다.
        - 기술 코드와 비즈니스 로직이 섞이면 코드의 이해도와 유지보수성이 떨어진다.
- 애노테이션은 부가적인 메타데이터로 간주되므로, 애노테이션을 사용하더라도 특정 환경에 종속되지 않는다면 POJO로 볼 수 있다.
- 규약과 환경에 종속되어 있지 않더라도, 객체지향적인 설계 원칙에 충실하지 않으면 POJO로 볼 수 없다.

### 8.3.4 POJO의 장점

- POJO가 될 수 있는 조건이 POJO의 장점이기도 하다.
- 특정 기술이나 환경에 종속되지 않은 객체는 코드가 단순해 진다.
    - 개발이 쉽고, 디버깅도 수월하다.
    - 코드를 읽고 이해하기 쉽다.
- 자동화된 테스트에 유리하다.
    - 환경에 종속된 코드는 테스트할 때 환경 설정으로 인해 절차가 복잡하고 번거롭다.
    - POJO는 어떤 환경에도 종속되지 않기 때문에, 원하는 레벨에서 빠르고 명확하게 테스트할 수 있다.
- 객체지향 설계를 자유롭게 적용할 수 있다.
    - POJO가 아닌 객체는 도메인 모델링, 디자인 패턴 등 적용이 어렵다.

### 8.3.5 POJO 프레임워크

- POJO 프레임워크란, POJO 기반의 프로그래밍이 가능하도록 기술적인 기반을 제공하는 프레임워크를 말한다.
- 대표적으로 스프링 프레임워크와 하이버네이트가 있다.
    - 하이버네이트(Hibernate)
        - DB 연동 기술에 POJO를 적용하는 것을 목적으로 하는 프레임워크이다.
    - 스프링 프레임워크
        - 엔터프라이즈 애플리케이션 개발의 모든 계층과 영역에서 POJO 방식의 구현이 가능하도록 설계되었다.
        - 핵심 로직은 객체지향적으로 구현된 POJO를 통해 깔끔하게 구현하고, 동시에 엔터프라이즈 환경에서 요구되는 기술들을 POJO 코드에 자연스럽게 통합할 수 있다.
        - 스프링은 비침투적 설계 철학을 지키면서도, POJO로 애플리케이션을 쉽게 개발할 수 있도록 지원한다.
- 객체지향적 POJO 프로그래밍을 효과적으로 활용하기 위한 조건
    - 객체지향 분석 및 설계
    - 자바 언어와 JVM 플랫폼, JDK API 사용법
    - 디자인 패턴 및 구현 패턴
    - 리팩토링 기법
- 스프링을 사용한다고 해서 이러한 부담이 줄어드는 것은 아니지만, 객체지향 설계와 개발에 집중할 수 있는 환경을 제공하여 자연스럽게 좋은 코드를 작성할 수 있는 기회를 만들어준다.
